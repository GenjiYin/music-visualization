# 🎵 Music Flow - 音频可视化工具

一个功能丰富的浏览器端音频可视化工具，支持多种可视化模式和屏幕录制功能。

**作者**: XiaoYin

## ✨ 主要特性

- **🎨 多种可视化模式**
  - 极光流线 (Aurora) - 流动的波形线条效果
  - 粒子星云 (Nebula) - 螺旋粒子动画
  - 万花筒 (Kaleidoscope) - 对称镜像效果
  - 复古霓虹 (Neon) - 80年代赛博朋克风格
  - 能量脉冲 (Pulse) - 动态圆环脉冲效果

- **🎤 多种音频输入方式**
  - 本地音频文件播放
  - 实时麦克风输入
  - 支持播放控制（播放/暂停）

- **🎬 屏幕录制功能**
  - 支持录制可视化动画和音频
  - 导出为 WebM 视频格式
  - 60fps 流畅录制

- **🎯 精致的用户界面**
  - 磨砂玻璃效果 UI
  - 响应式设计，支持移动端
  - 实时状态指示器
  - 流畅的动画过渡

## 🚀 快速开始

### 在线使用

1. 直接在浏览器中打开 `music.html` 文件
2. 点击屏幕初始化音频引擎
3. 选择音频输入方式开始体验

### 本地部署

```bash
# 克隆仓库
git clone [你的仓库地址]

# 进入目录
cd 音乐可视化

# 使用任意 HTTP 服务器运行
# 例如使用 Python
python -m http.server 8000

# 或使用 Node.js
npx serve
```

然后在浏览器中访问 `http://localhost:8000/music.html`

## 📖 使用说明

### 基本操作

1. **加载音频文件**
   - 点击 📁 按钮选择本地音频文件
   - 支持常见音频格式（MP3, WAV, OGG等）
   - 文件加载后会显示"就绪"状态

2. **播放控制**
   - 点击 ▶ 播放按钮开始播放
   - 播放中可点击 ⏹ 停止按钮暂停
   - 音频播放完成会自动停止

3. **使用麦克风**
   - 点击 🎤 按钮启用麦克风输入
   - 浏览器会请求麦克风权限
   - 麦克风模式为实时输入，无法暂停

4. **切换可视化模式**
   - 在底部模式选择器中选择不同模式
   - 支持实时切换，不影响播放

5. **录制视频**
   - 点击录制按钮开始录制
   - 录制中按钮会显示红色闪烁
   - 再次点击停止录制并自动下载视频

### 可视化模式详解

- **极光流线**: 适合流畅的音乐，展现波形的起伏变化
![](asset/极光流线.gif)
- **粒子星云**: 适合电子音乐，粒子随节奏旋转
![](asset/粒子星云.gif)
- **万花筒**: 对称美学，适合有规律的节奏
![](asset/万花筒.gif)
- **复古霓虹**: 80年代风格，带有频谱柱状图
![](asset/复古霓虹.gif)
- **能量脉冲**: 适合重低音音乐，突出节拍感
![](asset/能量脉冲.gif)

## 🛠️ 技术栈

- 原生 HTML5 / CSS3 / JavaScript
- Web Audio API - 音频处理和分析
- Canvas API - 图形渲染
- MediaRecorder API - 视频录制
- MediaStream API - 麦克风输入

## 💻 浏览器兼容性

推荐使用以下浏览器以获得最佳体验：

- Chrome / Edge 90+
- Firefox 88+
- Safari 14+
- Opera 76+

**注意**: 录制功能需要浏览器支持 MediaRecorder API

## 📝 项目结构

```
音乐可视化/
├── asset              # 可视化展示
├── music.html          # 主文件（包含所有代码）
└── README.md          # 项目说明文档
```

## 🎯 核心功能实现

### 音频分析
- 使用 Web Audio API 的 AnalyserNode 进行频谱分析
- FFT 大小: 2048
- 平滑时间常数: 0.85

### 可视化渲染
- 基于 Canvas 2D 上下文渲染
- 60fps 动画循环
- 实时响应音频频谱数据

### 视频录制
- 捕获 Canvas 流 (60fps)
- 合并音频流和视频流
- 编码为 WebM 格式

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

本项目采用 MIT 许可证

© 2025 XiaoYin Xu. All rights reserved.

## 🙏 致谢

灵感来源于各类音乐可视化工具和音频分析库

---

**Let the Music Flow! 🎶✨**
